(function() {
  var add_row;

  $('#add-row').on('click', function(e) {
    var table_body;
    e.preventDefault();
    table_body = $(e.target).data().table;
    if (table_body) {
      return add_row(table_body);
    }
  });

  add_row = function(table_body_element) {
    var $cloner, $new_row, $rows, $tbody, count, inputs;
    // Get some variables for the tbody and the row to clone.
    $tbody = $('#' + table_body_element);
    $rows = $($tbody.children('tr'));
    $cloner = $rows.eq(0);
    count = $rows.length;
    // Clone the row and get an array of the inputs.
    $new_row = $cloner.clone();
    inputs = $new_row.find('.dyn-input');
    // Change the name and id for each input.
    $.each(inputs, function(i, v) {
      var $input, $label, checked;
      $input = $(v);
      // Find the label for input and adjust it.
      $label = $new_row.find(`label[for='${$input.attr('id')}']`);
      $label.attr({
        'for': $input.attr('id').replace(/\[.*\]/, `${count + 1}`)
      });
      $input.attr({
        'name': $input.attr('name').replace(/\[.*\]/, `${count + 1}`),
        'id': $input.attr('id').replace(/\[.*\]/, `${count + 1}`)
      });
    
    });
    // Add the new row to the tbody.
    return $tbody.append($new_row);
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQSxNQUFBOztFQUFBLENBQUEsQ0FBRSxVQUFGLENBQWEsQ0FBQyxFQUFkLENBQWlCLE9BQWpCLEVBQTBCLFFBQUEsQ0FBQyxDQUFELENBQUE7QUFDeEIsUUFBQTtJQUFBLENBQUMsQ0FBQyxjQUFGLENBQUE7SUFDQSxVQUFBLEdBQWEsQ0FBQSxDQUFFLENBQUMsQ0FBQyxNQUFKLENBQVcsQ0FBQyxJQUFaLENBQUEsQ0FBa0IsQ0FBQztJQUNoQyxJQUFHLFVBQUg7YUFDRSxPQUFBLENBQVEsVUFBUixFQURGOztFQUh3QixDQUExQjs7RUFNQSxPQUFBLEdBQVUsUUFBQSxDQUFDLGtCQUFELENBQUE7QUFFUixRQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsTUFBQTs7SUFBQSxNQUFBLEdBQVMsQ0FBQSxDQUFFLEdBQUEsR0FBTSxrQkFBUjtJQUNULEtBQUEsR0FBUSxDQUFBLENBQUUsTUFBTSxDQUFDLFFBQVAsQ0FBZ0IsSUFBaEIsQ0FBRjtJQUNSLE9BQUEsR0FBVSxLQUFLLENBQUMsRUFBTixDQUFTLENBQVQ7SUFDVixLQUFBLEdBQVEsS0FBSyxDQUFDLE9BSGQ7O0lBTUEsUUFBQSxHQUFXLE9BQU8sQ0FBQyxLQUFSLENBQUE7SUFDWCxNQUFBLEdBQVMsUUFBUSxDQUFDLElBQVQsQ0FBYyxZQUFkLEVBUFQ7O0lBVUEsQ0FBQyxDQUFDLElBQUYsQ0FBTyxNQUFQLEVBQWUsUUFBQSxDQUFDLENBQUQsRUFBSSxDQUFKLENBQUE7QUFDYixVQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUE7TUFBQSxNQUFBLEdBQVMsQ0FBQSxDQUFFLENBQUYsRUFBVDs7TUFHQSxNQUFBLEdBQVMsUUFBUSxDQUFDLElBQVQsQ0FBYyxDQUFBLFdBQUEsQ0FBQSxDQUFjLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBWixDQUFkLENBQWdDLEVBQWhDLENBQWQ7TUFDVCxNQUFNLENBQUMsSUFBUCxDQUFhO1FBQUMsS0FBQSxFQUFPLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBWixDQUFpQixDQUFDLE9BQWxCLENBQTBCLFFBQTFCLEVBQW9DLENBQUEsQ0FBQSxDQUFBLENBQUksS0FBQSxHQUFRLENBQVosQ0FBYyxDQUFkLENBQXBDO01BQVIsQ0FBYjtNQUVBLE1BQU0sQ0FBQyxJQUFQLENBQVk7UUFDVixNQUFBLEVBQVEsTUFBTSxDQUFDLElBQVAsQ0FBWSxNQUFaLENBQW1CLENBQUMsT0FBcEIsQ0FBNEIsUUFBNUIsRUFBc0MsQ0FBQSxDQUFBLENBQUEsQ0FBSSxLQUFBLEdBQVEsQ0FBWixDQUFjLENBQWQsQ0FBdEMsQ0FERTtRQUVWLElBQUEsRUFBTSxNQUFNLENBQUMsSUFBUCxDQUFZLElBQVosQ0FBaUIsQ0FBQyxPQUFsQixDQUEwQixRQUExQixFQUFvQyxDQUFBLENBQUEsQ0FBQSxDQUFJLEtBQUEsR0FBUSxDQUFaLENBQWMsQ0FBZCxDQUFwQztNQUZJLENBQVosRUFOQTs7TUFZQSxNQUFNLENBQUMsR0FBUCxDQUFXLEVBQVg7TUFDQSxPQUFBLEdBQVUsTUFBTSxDQUFDLElBQVAsQ0FBWSxTQUFaO01BQ1YsSUFBRyxPQUFIO2VBQ0UsTUFBTSxDQUFDLElBQVAsQ0FBWSxTQUFaLEVBQXVCLEtBQXZCLEVBREY7O0lBZmEsQ0FBZixFQVZBOztXQThCQSxNQUFNLENBQUMsTUFBUCxDQUFjLFFBQWQ7RUFoQ1E7QUFOViIsInNvdXJjZXNDb250ZW50IjpbIiAgXG4kKCcjYWRkLXJvdycpLm9uICdjbGljaycsIChlKSAtPlxuICBlLnByZXZlbnREZWZhdWx0KClcbiAgdGFibGVfYm9keSA9ICQoZS50YXJnZXQpLmRhdGEoKS50YWJsZVxuICBpZiB0YWJsZV9ib2R5XG4gICAgYWRkX3Jvdyh0YWJsZV9ib2R5KVxuXG5hZGRfcm93ID0gKHRhYmxlX2JvZHlfZWxlbWVudCkgLT5cbiMgR2V0IHNvbWUgdmFyaWFibGVzIGZvciB0aGUgdGJvZHkgYW5kIHRoZSByb3cgdG8gY2xvbmUuXG4gICR0Ym9keSA9ICQoJyMnICsgdGFibGVfYm9keV9lbGVtZW50KVxuICAkcm93cyA9ICQoJHRib2R5LmNoaWxkcmVuKCd0cicpKVxuICAkY2xvbmVyID0gJHJvd3MuZXEoMClcbiAgY291bnQgPSAkcm93cy5sZW5ndGhcblxuICAjIENsb25lIHRoZSByb3cgYW5kIGdldCBhbiBhcnJheSBvZiB0aGUgaW5wdXRzLlxuICAkbmV3X3JvdyA9ICRjbG9uZXIuY2xvbmUoKVxuICBpbnB1dHMgPSAkbmV3X3Jvdy5maW5kKCcuZHluLWlucHV0JylcblxuICAjIENoYW5nZSB0aGUgbmFtZSBhbmQgaWQgZm9yIGVhY2ggaW5wdXQuXG4gICQuZWFjaChpbnB1dHMsIChpLCB2KSAtPlxuICAgICRpbnB1dCA9ICQodilcblxuICAgICMgRmluZCB0aGUgbGFiZWwgZm9yIGlucHV0IGFuZCBhZGp1c3QgaXQuXG4gICAgJGxhYmVsID0gJG5ld19yb3cuZmluZChcImxhYmVsW2Zvcj0nI3skaW5wdXQuYXR0cignaWQnKX0nXVwiKVxuICAgICRsYWJlbC5hdHRyKCB7J2Zvcic6ICRpbnB1dC5hdHRyKCdpZCcpLnJlcGxhY2UoL1xcWy4qXFxdLywgXCJbI3tjb3VudCArIDF9XVwiKX0gKVxuXG4gICAgJGlucHV0LmF0dHIoe1xuICAgICAgJ25hbWUnOiAkaW5wdXQuYXR0cignbmFtZScpLnJlcGxhY2UoL1xcWy4qXFxdLywgXCJbI3tjb3VudCArIDF9XVwiKSxcbiAgICAgICdpZCc6ICRpbnB1dC5hdHRyKCdpZCcpLnJlcGxhY2UoL1xcWy4qXFxdLywgXCJbI3tjb3VudCArIDF9XVwiKVxuICAgIH0pXG5cbiAgICAjIFJlbW92ZSB2YWx1ZXMgYW5kIGNoZWNrcy5cbiAgICAkaW5wdXQudmFsKCcnKVxuICAgIGNoZWNrZWQgPSAkaW5wdXQucHJvcCgnY2hlY2tlZCcpXG4gICAgaWYgY2hlY2tlZFxuICAgICAgJGlucHV0LnByb3AoJ2NoZWNrZWQnLCBmYWxzZSlcbiAgKVxuXG4gICMgQWRkIHRoZSBuZXcgcm93IHRvIHRoZSB0Ym9keS5cbiAgJHRib2R5LmFwcGVuZCgkbmV3X3JvdykiXX0=
//# sourceURL=coffeescript